using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using MoreMountains.Feedbacks;
using static MMFCollisionManager;

public class MMFCollisionManager : MonoBehaviour
{
    [System.Serializable]
    public struct MMFObjects
    {
        public string ObjectName;
        public GameObject GameObject;
        public MMFeedbacks MMFPlayer;
        public LayerMask LayerMask;
    }
    
    [System.Serializable]
    public class MMFCollisionLists
    {
        public string ListName;
        public List<MMFObjects> feedbackObjects;
    }
    
    public List<MMFCollisionLists> CollisionLists;

    public void CheckAndPlay(GameObject collidingObject)
    {
        foreach (MMFCollisionLists CollisionList in CollisionLists)
        {
            // Find the FeedbackObjects that contains the collided gameObject
            MMFObjects feedbackObjects = CollisionList.feedbackObjects.Find(x => x.GameObject == collidingObject);

            // Check if the colliding object is in the specified layer
            if (feedbackObjects.LayerMask == (feedbackObjects.LayerMask | (1 << collidingObject.gameObject.layer)))
            {
                // Initialize and play the feedback for the gameObject
                feedbackObjects.MMFPlayer.Initialization();
                feedbackObjects.MMFPlayer.PlayFeedbacks();
            }
        }
    }
}
